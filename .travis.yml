language: python 
python:
  - 2.7
  - pypy
  - 3.3
  - 3.4
  - 3.5

sudo: false

addons:
  apt:
    packages:
    - nodejs

# command to install dependencies
install:
  - travis_retry pip install --upgrade pytest pytest-cov coveralls
  - python setup.py develop

# command to run tests
script:
  - if [[ $TRAVIS_PYTHON_VERSION != 3* ]]; then py.test --cov-config=coveragerc-python2; fi
  - if [[ $TRAVIS_PYTHON_VERSION == 3* ]]; then py.test; fi

after_success:
  - if [[ $TRAVIS_PYTHON_VERSION == 3.5 ]]; then echo "sending coveralls"; coveralls --rcfile=coveragerc-python3; fi

notifications:
  irc:
    channels:
      - "chat.freenode.net#tonnikala"
    on_success: change
    on_failure: change
    use_notice: true
    skip_join: true
